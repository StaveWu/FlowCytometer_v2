# FlowCytometer_v2

首先简单介绍下流式细胞仪。

流式细胞仪是一种精密仪器，它能够精确控制试管中的细胞逐个通过一个非常微细的管道。在管道中间会有一束激光垂直照射，当细胞流经管道时，细胞中的化合物受光激发，会散射一些光谱，分多通道返回，此时细胞仪的电路系统负责采集这些通道的光谱数据并发送到上位机软件。

这里的FlowCytometer即为流式细胞仪的一个上位机软件，其功能是和下位机的电路板连接，接收细胞的光谱数据并实时显示与控制。软件界面如下图所示：
![图1 流式细胞仪上位机软件界面](https://github.com/StaveWu/images/blob/master/FlowCytometer_v2/main_page.png)

## 软件功能
根据需求，上位机软件主要要实现以下功能：
 - 接收并解析光谱数据，实时滤波，将滤波后的数据以AreaChart的形式显示；
 - 在光谱数据中实时捕捉谱峰，并计算峰宽/峰高/峰面积，作为细胞在当前通道中的特征。
 - 每个通道对应细胞的一种特征，在worksheet模块中，需要对这些特征实时筛选，选出满足通道1特征在多少范围内、通道2特征在多少范围内、通道1特征在多少范围内...的细胞种群。
 - 软件还需对满足条件的种群进行count，当到达指定个数时停止采集。
 - 额外的一个项目管理功能。

## 实现方法
针对软件功能，划分了以下模块：
 - starter：项目启动器，模仿idea IDE的设计
 - projectTree：项目树，用于管理项目文件
 - dashboard：与下位机的收发操作都在这里
 - channel：用于通道数据显示
 - worksheet：用于特征筛选和细胞分群

每个模块均采用JavaFX + SpringBoot的方式编写，和第一版的Swing相比，可以节省大量的界面和逻辑代码；另外，模块还设置了单独启动的入口（以“模块名 + App”命名的类），方便调试；模块之间的通信采用Guava的事件总线。
